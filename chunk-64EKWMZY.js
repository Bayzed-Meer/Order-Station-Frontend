import{a as Ct}from"./chunk-RZO5UEUE.js";import{a as _t}from"./chunk-RPPOXAAJ.js";import"./chunk-BE25XLFQ.js";import{a as Z,b as tt,c as et,d as nt,e as it,f as ot,g as rt,h as at,i as mt,j as lt,k as dt,l as ct,m as pt,n as h,o as ft,p as y,q as st,r as ut}from"./chunk-IF4R4DCX.js";import"./chunk-4RKGKIHI.js";import{a as U}from"./chunk-QXHIHSTA.js";import{A as w,Ta as q,Ua as L,Va as G,Wa as J,Ya as K,ab as W,cb as X,db as Y,ra as B}from"./chunk-JKOZUD4R.js";import{$b as F,Bb as i,Cb as n,D,Db as C,Dc as j,Eb as d,Fb as c,Hb as N,Kb as $,Mb as M,Qb as x,Rb as S,Sb as P,Tb as b,Ub as o,Vb as p,W as O,Wa as a,Wb as v,ac as V,bc as E,cc as H,da as g,ha as I,p as T,pb as m,qb as k,ra as R,rb as _,sa as A,wb as z,za as Q}from"./chunk-EBQJBUXN.js";var ht=()=>[5,10,25];function yt(t,e){t&1&&(i(0,"th",25),o(1,"Username"),n())}function Ot(t,e){if(t&1&&(i(0,"td",26),o(1),n()),t&2){let r=e.$implicit;a(),p(r.username||"-")}}function Mt(t,e){t&1&&(i(0,"th",25),o(1,"ID"),n())}function xt(t,e){if(t&1&&(i(0,"td",26),o(1),n()),t&2){let r=e.$implicit;a(),p(r.employeeID||"-")}}function St(t,e){t&1&&(i(0,"th",25),o(1,"Tea Quantity"),n())}function Pt(t,e){if(t&1&&(i(0,"td",26),o(1),n()),t&2){let r=e.$implicit;a(),p(r.teaQuantity||"-")}}function bt(t,e){t&1&&(i(0,"th",27),o(1,"Tea Amount"),n())}function vt(t,e){if(t&1&&(i(0,"td",26),o(1),n()),t&2){let r=e.$implicit;a(),p(r.teaAmount||"-")}}function Et(t,e){t&1&&(i(0,"th",25),o(1,"Coffee Quantity"),n())}function Ht(t,e){if(t&1&&(i(0,"td",26),o(1),n()),t&2){let r=e.$implicit;a(),p(r.coffeeQuantity||"-")}}function wt(t,e){t&1&&(i(0,"th",27),o(1,"Coffee Amount"),n())}function Tt(t,e){if(t&1&&(i(0,"td",26),o(1),n()),t&2){let r=e.$implicit;a(),p(r.coffeeAmount||"-")}}function Dt(t,e){t&1&&(i(0,"th",27),o(1,"Notes"),n())}function It(t,e){if(t&1&&(i(0,"td",26),o(1),n()),t&2){let r=e.$implicit;a(),p(r.notes||"-")}}function Rt(t,e){t&1&&(i(0,"th",25),o(1,"Room Number"),n())}function At(t,e){if(t&1&&(i(0,"td",26),o(1),n()),t&2){let r=e.$implicit;a(),p(r.roomNumber||"-")}}function Qt(t,e){t&1&&(i(0,"th",25),o(1,"Created At"),n())}function kt(t,e){if(t&1&&(i(0,"td",26),o(1),E(2,"timesAgo"),n()),t&2){let r=e.$implicit;a(),p(H(2,1,r.createdAt))}}function zt(t,e){t&1&&(i(0,"th",25),o(1,"Order Status"),n())}function Nt(t,e){if(t&1&&(i(0,"td",26),o(1),E(2,"titlecase"),n()),t&2){let r=e.$implicit;a(),v(" ",H(2,1,r.orderStatus)," ")}}function $t(t,e){t&1&&(i(0,"div",29),C(1,"app-spinner"),n())}function Ft(t,e){if(t&1&&(i(0,"div",30),o(1),n()),t&2){M(2);let r=b(11);a(),v(' No data matching for the filter "',r.value,'" ')}}function Vt(t,e){t&1&&(i(0,"div",30)(1,"mat-icon"),o(2,"search_off"),n(),i(3,"div"),o(4,"No order history found"),n()())}function jt(t,e){if(t&1&&(i(0,"tr",28)(1,"td"),m(2,$t,2,0,"div",29)(3,Ft,2,1,"div",30)(4,Vt,5,0,"div",30),n()()),t&2){let r=M(),l=b(11);a(),k("colspan",r.displayedColumns.length),a(),z(r.loading?2:l.value?3:4)}}function Ut(t,e){t&1&&C(0,"tr",31)}function Bt(t,e){t&1&&C(0,"tr",32)}var he=(()=>{let e=class e{constructor(){this.orderService=g(_t),this.authService=g(U),this.destroyRef=g(Q),this.role="",this.loading=!0,this.displayedColumns=[],this.dataSource=new pt}ngOnInit(){this.checkRole(),this.setUpTableColumn(),this.getOderHistory()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}checkRole(){this.authService.getRole().pipe(O(l=>this.role=l),w(this.destroyRef)).subscribe()}setUpTableColumn(){this.displayedColumns=this.role!=="employee"?["username","id","teaQuantity","teaAmount","coffeeQuantity","coffeeAmount","notes","roomNumber","createdAt","orderStatus"]:["teaQuantity","teaAmount","coffeeQuantity","coffeeAmount","notes","roomNumber","createdAt","orderStatus"]}getOderHistory(){this.orderService.getOrderHistory().pipe(O(l=>{this.dataSource.data=l,this.loading=!1}),D(l=>(this.loading=!1,console.log(l),T([]))),w(this.destroyRef)).subscribe()}applyFilter(l){let f=l.target.value;this.dataSource.filter=f.trim().toLowerCase()}};e.\u0275fac=function(f){return new(f||e)},e.\u0275cmp=I({type:e,selectors:[["app-order-history"]],viewQuery:function(f,s){if(f&1&&(x(h,5),x(y,5)),f&2){let u;S(u=P())&&(s.paginator=u.first),S(u=P())&&(s.sort=u.first)}},standalone:!0,features:[F],decls:48,vars:5,consts:[["input",""],[1,"container"],[1,"title"],[1,"filter"],["matIconPrefix",""],["matInput","",3,"keyup"],[1,"table-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","username"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["matColumnDef","teaQuantity"],["matColumnDef","teaAmount"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","coffeeQuantity"],["matColumnDef","coffeeAmount"],["matColumnDef","notes"],["matColumnDef","roomNumber"],["matColumnDef","createdAt"],["matColumnDef","orderStatus"],["class","no-data-row",4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page of orders",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"no-data-row"],[1,"spinner"],[1,"no-data-content"],["mat-header-row",""],["mat-row",""]],template:function(f,s){if(f&1){let u=N();i(0,"div",1)(1,"div",2)(2,"mat-icon"),o(3,"history"),n(),o(4," Order History "),n(),i(5,"mat-form-field",3)(6,"mat-icon",4),o(7,"filter_alt"),n(),i(8,"mat-label"),o(9,"Filter"),n(),i(10,"input",5,0),$("keyup",function(gt){return R(u),A(s.applyFilter(gt))}),n()(),i(12,"div",6)(13,"table",7),d(14,8),m(15,yt,2,0,"th",9)(16,Ot,2,1,"td",10),c(),d(17,11),m(18,Mt,2,0,"th",9)(19,xt,2,1,"td",10),c(),d(20,12),m(21,St,2,0,"th",9)(22,Pt,2,1,"td",10),c(),d(23,13),m(24,bt,2,0,"th",14)(25,vt,2,1,"td",10),c(),d(26,15),m(27,Et,2,0,"th",9)(28,Ht,2,1,"td",10),c(),d(29,16),m(30,wt,2,0,"th",14)(31,Tt,2,1,"td",10),c(),d(32,17),m(33,Dt,2,0,"th",14)(34,It,2,1,"td",10),c(),d(35,18),m(36,Rt,2,0,"th",9)(37,At,2,1,"td",10),c(),d(38,19),m(39,Qt,2,0,"th",9)(40,kt,3,3,"td",10),c(),d(41,20),m(42,zt,2,0,"th",9)(43,Nt,3,3,"td",10),c(),m(44,jt,5,2,"tr",21)(45,Ut,1,0,"tr",22)(46,Bt,1,0,"tr",23),n(),C(47,"mat-paginator",24),n()()}f&2&&(a(13),_("dataSource",s.dataSource),a(32),_("matHeaderRowDef",s.displayedColumns),a(),_("matRowDefColumns",s.displayedColumns),a(),_("pageSizeOptions",V(4,ht)))},dependencies:[ct,Z,et,rt,nt,tt,at,it,ot,mt,lt,dt,ut,y,st,ft,h,L,q,B,j,Ct,G,Y,X,W,J,K],styles:[".container[_ngcontent-%COMP%]{padding:1.5rem 2rem}.title[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:1rem;background-color:#024988;color:#f0eeee;font-size:1.25rem;padding:.5rem;gap:.5rem;font-weight:500}.filter[_ngcontent-%COMP%]{width:100%}.table-container[_ngcontent-%COMP%]{box-shadow:0 .5rem 1rem #0000001a;padding:1rem;overflow-x:auto;background-color:#fff}.table-container[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#024988;color:#fff}.table-container[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n)   td[_ngcontent-%COMP%]{background-color:#f2f2f2}.table-container[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd)   td[_ngcontent-%COMP%]{background-color:#f9f9f9}.table-container[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{color:#000;background-color:#fff}.spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:.5rem}.no-data-row[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:.25rem;font-weight:500;padding:.5rem}@media (max-width: 480px){.container[_ngcontent-%COMP%]{padding:1rem 1.75rem}.title[_ngcontent-%COMP%]{margin-bottom:.5rem;font-size:.875rem;padding:.25rem;gap:.25rem}.table-container[_ngcontent-%COMP%]{padding:.5rem}.table-container[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.75rem;padding:.5rem}.table-container[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{font-size:.625rem}}@media (min-width: 481px) and (max-width: 768px){.container[_ngcontent-%COMP%]{padding:1.5rem}.title[_ngcontent-%COMP%]{margin-bottom:.75rem;font-size:1rem;padding:.25rem;gap:.5rem}.table-container[_ngcontent-%COMP%]{padding:.75rem}.table-container[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.75rem;padding:.5rem}.table-container[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{font-size:.625rem}}@media (min-width: 769px) and (max-width: 1024px){.container[_ngcontent-%COMP%]{padding:1.5rem}.title[_ngcontent-%COMP%]{margin-bottom:.75rem;font-size:1rem;padding:.25rem;gap:.5rem}.table-container[_ngcontent-%COMP%]{padding:.75rem}.table-container[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.75rem;padding:.5rem}.table-container[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{font-size:.75rem}}"]});let t=e;return t})();export{he as OrderHistoryComponent};
