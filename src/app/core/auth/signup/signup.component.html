<div class="container">
    <div class="form-wrapper">
        <p class="form-title">
            <mat-icon>person_add</mat-icon>
            Add New User
        </p>

        <form [formGroup]="signupForm" (ngSubmit)="onSubmit()">
            <mat-form-field class="full-width">
                <mat-label>Username</mat-label>
                <input matInput id="username" formControlName="username" placeholder="John Cena" />
                <mat-error
                    *ngIf="
                        signupForm.get('username')!.invalid && signupForm.get('username')!.touched
                    "
                >
                    <ng-container *ngIf="signupForm.get('username')!.errors?.['required']">
                        Username is required.
                    </ng-container>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="full-width">
                <mat-label>Role</mat-label>
                <mat-select id="role" formControlName="role">
                    <mat-option value="employee">Employee</mat-option>
                    <mat-option value="staff">Staff</mat-option>
                </mat-select>
                <mat-error
                    *ngIf="signupForm.get('role')!.invalid && signupForm.get('role')!.touched"
                >
                    <ng-container *ngIf="signupForm.get('role')!.errors?.['required']">
                        Role is required.
                    </ng-container>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="full-width">
                <mat-label>ID</mat-label>
                <input matInput id="id" formControlName="id" placeholder="BS123" />
                <mat-error *ngIf="signupForm.get('id')!.invalid && signupForm.get('id')!.touched">
                    <ng-container *ngIf="signupForm.get('id')!.errors?.['required']">
                        ID is required.
                    </ng-container>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="full-width">
                <mat-label>Email</mat-label>
                <input
                    matInput
                    id="email"
                    formControlName="email"
                    placeholder="example@gmail.com"
                />
                <mat-error
                    *ngIf="signupForm.get('email')!.invalid && signupForm.get('email')!.touched"
                >
                    <ng-container *ngIf="signupForm.get('email')!.errors?.['required']">
                        Email is required.
                    </ng-container>
                    <ng-container *ngIf="signupForm.get('email')!.errors?.['email']">
                        Invalid email format.
                    </ng-container>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="full-width">
                <mat-label>Password</mat-label>
                <input
                    matInput
                    id="password"
                    type="password"
                    formControlName="password"
                    placeholder="••••••••"
                />
                <mat-error
                    *ngIf="
                        signupForm.get('password')!.invalid && signupForm.get('password')!.touched
                    "
                >
                    <ng-container *ngIf="signupForm.get('password')!.errors?.['required']">
                        Password is required.
                    </ng-container>
                    <ng-container *ngIf="signupForm.get('password')!.errors?.['minlength']">
                        Password must be at least 8 characters long.
                    </ng-container>
                    <ng-container *ngIf="signupForm.get('password')!.errors?.['maxlength']">
                        Password cannot exceed 32 characters.
                    </ng-container>
                    <ng-container *ngIf="signupForm.get('password')!.errors?.['pattern']">
                        Password must contain at least one uppercase letter, one lowercase letter,
                        one digit, and one special character (e.g., '&#64;', #, $, etc.).
                    </ng-container>
                </mat-error>
            </mat-form-field>

            <button mat-flat-button type="submit" [disabled]="loading" class="submit-button">
                <ng-container *ngIf="loading">
                    <app-spinner></app-spinner>
                </ng-container>
                <ng-container *ngIf="!loading">
                    <span>Submit</span>
                </ng-container>
            </button>
        </form>
    </div>
</div>
