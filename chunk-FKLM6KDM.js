import{a as fe}from"./chunk-NADLF5OP.js";import{a as ue}from"./chunk-ZXCNH5DE.js";import{a as F}from"./chunk-AQHRL66G.js";import{a as pe}from"./chunk-NZF4T2UZ.js";import{a as K,b as W,c as X,d as Z,e as ee,f as te,g as ne,h as ie,i as re,j as oe,k as ae,l as me,m as le,n as y,o as de,p as v,q as ce,r as se}from"./chunk-KJX5UUE5.js";import{a as O}from"./chunk-WQ6OIEHT.js";import"./chunk-UXP6TVML.js";import{Ea as G,Fa as J,da as q,fa as L,t as g,za as Y}from"./chunk-MGXZWG47.js";import{Ab as n,Ac as B,Bb as i,Cb as b,Cc as j,D as S,Db as s,Eb as p,Gb as E,Jb as D,Lb as _,Pb as T,Qb as R,Rb as A,Tb as o,Ub as u,Vb as N,W as h,Wa as l,Xb as H,Yb as V,Zb as I,_b as z,da as M,ha as Q,p as x,pb as d,qb as $,ra as P,rb as C,sa as w,xc as U,za as k}from"./chunk-BTNHTO55.js";var Ce=()=>[5,10,25];function _e(e,t){e&1&&(n(0,"th",23),o(1,"Username"),i())}function ge(e,t){if(e&1&&(n(0,"td",24),o(1),i()),e&2){let r=t.$implicit;l(),u(r.username||"-")}}function he(e,t){e&1&&(n(0,"th",23),o(1,"ID"),i())}function Oe(e,t){if(e&1&&(n(0,"td",24),o(1),i()),e&2){let r=t.$implicit;l(),u(r.employeeID||"-")}}function xe(e,t){e&1&&(n(0,"th",23),o(1,"Tea Quantity"),i())}function Se(e,t){if(e&1&&(n(0,"td",24),o(1),i()),e&2){let r=t.$implicit;l(),u(r.teaQuantity||"-")}}function Me(e,t){e&1&&(n(0,"th",25),o(1,"Tea Amount"),i())}function be(e,t){if(e&1&&(n(0,"td",24),o(1),i()),e&2){let r=t.$implicit;l(),u(r.teaAmount||"-")}}function ye(e,t){e&1&&(n(0,"th",23),o(1,"Coffee Quantity"),i())}function ve(e,t){if(e&1&&(n(0,"td",24),o(1),i()),e&2){let r=t.$implicit;l(),u(r.coffeeQuantity||"-")}}function Pe(e,t){e&1&&(n(0,"th",25),o(1,"Coffee Amount"),i())}function we(e,t){if(e&1&&(n(0,"td",24),o(1),i()),e&2){let r=t.$implicit;l(),u(r.coffeeAmount||"-")}}function Ee(e,t){e&1&&(n(0,"th",25),o(1,"Notes"),i())}function De(e,t){if(e&1&&(n(0,"td",24),o(1),i()),e&2){let r=t.$implicit;l(),u(r.notes||"-")}}function Te(e,t){e&1&&(n(0,"th",23),o(1,"Room Number"),i())}function Re(e,t){if(e&1&&(n(0,"td",24),o(1),i()),e&2){let r=t.$implicit;l(),u(r.roomNumber||"-")}}function Ae(e,t){e&1&&(n(0,"th",23),o(1,"Created At"),i())}function Ie(e,t){if(e&1&&(n(0,"td",24),o(1),I(2,"timesAgo"),i()),e&2){let r=t.$implicit;l(),u(z(2,1,r.createdAt))}}function ze(e,t){e&1&&(n(0,"th",23),o(1,"Order Status"),i())}function Qe(e,t){if(e&1&&(n(0,"td",24),o(1),I(2,"titlecase"),i()),e&2){let r=t.$implicit;l(),N(" ",z(2,1,r.orderStatus)," ")}}function ke(e,t){e&1&&(n(0,"th",25),o(1,"Actions"),i())}function $e(e,t){if(e&1){let r=E();n(0,"button",30),D("click",function(){P(r);let a=_().$implicit,c=_();return w(a.orderStatus==="in progress"?c.completeOrder(a._id):c.approveOrder(a._id))}),n(1,"mat-icon"),o(2),i(),n(3,"span",29),o(4),i()()}if(e&2){let r=_().$implicit;l(2),u(r.orderStatus==="in progress"?"done_all":"check_circle"),l(2),u(r.orderStatus==="in progress"?"Delivered":"Approve")}}function Ne(e,t){if(e&1){let r=E();n(0,"td",26),d(1,$e,5,2,"button",27),n(2,"button",28),D("click",function(){let a=P(r).$implicit,c=_();return w(c.cancelOrder(a._id))}),n(3,"mat-icon"),o(4,"cancel"),i(),n(5,"span",29),o(6,"Cancel"),i()()()}if(e&2){let r=t.$implicit,m=_();l(),C("ngIf",m.role!=="employee"),l(),C("disabled",r.orderStatus==="in progress"&&m.role==="employee")}}function He(e,t){if(e&1&&(n(0,"tr",31)(1,"td")(2,"div",32)(3,"mat-icon"),o(4,"search_off"),i(),n(5,"div"),o(6,"No orders found"),i()()()()),e&2){let r=_();l(),$("colspan",r.displayedColumns.length)}}function Ve(e,t){e&1&&b(0,"tr",33)}function Ue(e,t){e&1&&b(0,"tr",34)}var pt=(()=>{let t=class t{constructor(){this.dialog=M(Y),this.orderService=M(ue),this.authService=M(F),this.destroyRef=M(k),this.role="",this.displayedColumns=[],this.dataSource=new le}ngOnInit(){this.checkRole(),this.setUpTableColumn(),this.getOrders(),this.initializeOrderUpdates()}initializeOrderUpdates(){this.orderService.getOrderUpdates().pipe(g(this.destroyRef)).subscribe(()=>{this.getOrders()})}setUpTableColumn(){this.displayedColumns=this.role!=="employee"?["username","id","teaQuantity","teaAmount","coffeeQuantity","coffeeAmount","notes","roomNumber","createdAt","orderStatus","actions"]:["teaQuantity","teaAmount","coffeeQuantity","coffeeAmount","notes","roomNumber","createdAt","orderStatus","actions"]}checkRole(){this.authService.getRole().pipe(h(m=>this.role=m),g(this.destroyRef)).subscribe()}getOrders(){this.orderService.getCurrentOrders().pipe(h(m=>{this.dataSource.data=m}),S(m=>(O(this.dialog,m.error.message,"close"),console.log(m),x([]))),g(this.destroyRef)).subscribe()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}approveOrder(m){this.orderService.aprroveOrder(m).pipe(h(()=>{this.getOrders()}),S(a=>(O(this.dialog,a.error.message,"close"),console.log(a),x(a))),g(this.destroyRef)).subscribe()}completeOrder(m){this.orderService.completeOrder(m).pipe(h(()=>{this.getOrders()}),S(a=>(O(this.dialog,a.error.message,"close"),console.log(a),x(a))),g(this.destroyRef)).subscribe()}cancelOrder(m){this.dialog.open(pe,{width:"300px",data:{message:"Are you sure you want to cancel this order?",confirmButtonLabel:"Yes",cancelButtonLabel:"No"}}).afterClosed().subscribe(c=>{c==="confirm"&&this.orderService.cancelOrder(m,this.role).pipe(h(f=>{this.getOrders(),O(this.dialog,f.message,"close")}),S(f=>(O(this.dialog,f.error.message,"close"),console.log(f),x(f))),g(this.destroyRef)).subscribe()})}};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=Q({type:t,selectors:[["app-current-orders"]],viewQuery:function(a,c){if(a&1&&(T(y,5),T(v,5)),a&2){let f;R(f=A())&&(c.paginator=f.first),R(f=A())&&(c.sort=f.first)}},standalone:!0,features:[H],decls:44,vars:5,consts:[[1,"container"],[1,"title"],[1,"table-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","username"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["matColumnDef","teaQuantity"],["matColumnDef","teaAmount"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","coffeeQuantity"],["matColumnDef","coffeeAmount"],["matColumnDef","notes"],["matColumnDef","roomNumber"],["matColumnDef","createdAt"],["matColumnDef","orderStatus"],["matColumnDef","actions"],["mat-cell","","class","actions-cell",4,"matCellDef"],["class","no-data-row",4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page of orders",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"actions-cell"],["mat-flat-button","","color","primary",3,"click",4,"ngIf"],["mat-flat-button","","color","warn",3,"click","disabled"],[1,"button-text"],["mat-flat-button","","color","primary",3,"click"],[1,"no-data-row"],[1,"no-data-content"],["mat-header-row",""],["mat-row",""]],template:function(a,c){a&1&&(n(0,"div",0)(1,"div",1)(2,"mat-icon"),o(3,"shopping_cart"),i(),o(4," Current Orders"),i(),n(5,"div",2)(6,"table",3),s(7,4),d(8,_e,2,0,"th",5)(9,ge,2,1,"td",6),p(),s(10,7),d(11,he,2,0,"th",5)(12,Oe,2,1,"td",6),p(),s(13,8),d(14,xe,2,0,"th",5)(15,Se,2,1,"td",6),p(),s(16,9),d(17,Me,2,0,"th",10)(18,be,2,1,"td",6),p(),s(19,11),d(20,ye,2,0,"th",5)(21,ve,2,1,"td",6),p(),s(22,12),d(23,Pe,2,0,"th",10)(24,we,2,1,"td",6),p(),s(25,13),d(26,Ee,2,0,"th",10)(27,De,2,1,"td",6),p(),s(28,14),d(29,Te,2,0,"th",5)(30,Re,2,1,"td",6),p(),s(31,15),d(32,Ae,2,0,"th",5)(33,Ie,3,3,"td",6),p(),s(34,16),d(35,ze,2,0,"th",5)(36,Qe,3,3,"td",6),p(),s(37,17),d(38,ke,2,0,"th",10)(39,Ne,7,2,"td",18),p(),d(40,He,7,1,"tr",19)(41,Ve,1,0,"tr",20)(42,Ue,1,0,"tr",21),i(),b(43,"mat-paginator",22),i()()),a&2&&(l(6),C("dataSource",c.dataSource),l(35),C("matHeaderRowDef",c.displayedColumns),l(),C("matRowDefColumns",c.displayedColumns),l(),C("pageSizeOptions",V(4,Ce)))},dependencies:[me,K,X,ne,Z,W,ie,ee,te,re,oe,ae,se,v,ce,de,y,J,G,L,q,B,j,U,fe],styles:[".container[_ngcontent-%COMP%]{padding:1.5rem 2rem}.title[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:1rem;background-color:#024988;color:#f0eeee;font-size:1.25rem;padding:.5rem;gap:.5rem;font-weight:500}.table-container[_ngcontent-%COMP%]{box-shadow:0 .5rem 1rem #0000001a;padding:1rem;background-color:#fff}.table-container[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#024988;color:#fff}.table-container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem}.table-container[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{color:#000}.actions-cell[_ngcontent-%COMP%]{display:flex;gap:.25rem}.no-data-row[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:.25rem;font-size:1.25rem;font-weight:500;color:#025dad}@media (max-width: 480px){.container[_ngcontent-%COMP%]{padding:1rem 1.75rem}.title[_ngcontent-%COMP%]{margin-bottom:.5rem;font-size:.875rem;padding:.25rem;gap:.25rem}.table-container[_ngcontent-%COMP%]{padding:.5rem;overflow-x:auto}.table-container[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.75rem;padding:.5rem}.table-container[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{font-size:.625rem}.button-text[_ngcontent-%COMP%]{font-size:.75rem}}@media (min-width: 481px) and (max-width: 768px){.container[_ngcontent-%COMP%]{padding:1.5rem}.title[_ngcontent-%COMP%]{margin-bottom:.75rem;font-size:1rem;padding:.25rem;gap:.5rem}.table-container[_ngcontent-%COMP%]{padding:.75rem;overflow-x:auto}.table-container[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.75rem;padding:.5rem}.table-container[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{font-size:.625rem}.button-text[_ngcontent-%COMP%]{font-size:.75rem}}@media (min-width: 769px) and (max-width: 1024px){.container[_ngcontent-%COMP%]{padding:1.5rem}.title[_ngcontent-%COMP%]{margin-bottom:.75rem;font-size:1rem;padding:.25rem;gap:.5rem}.table-container[_ngcontent-%COMP%]{padding:.75rem;overflow-x:auto}.table-container[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.75rem;padding:.5rem}.table-container[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{font-size:.75rem}.button-text[_ngcontent-%COMP%]{font-size:.75rem}}"]});let e=t;return e})();export{pt as CurrentOrdersComponent};
