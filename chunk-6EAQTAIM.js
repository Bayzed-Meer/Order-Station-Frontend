import{a as T}from"./chunk-6GFOBDWL.js";import{a as K,b as Q}from"./chunk-IH3R4FBH.js";import{a as S}from"./chunk-FQON5K5U.js";import{a as W,b as X}from"./chunk-2BGQ2KSS.js";import{Aa as L,Fa as V,Ga as Z,Ha as $,Ia as j,Ja as J,Ma as H,aa as G,ea as U,ga as k,h as y,i as g,k as O,l as q,n as z,p as I,q as D,r as N,s as A,t as B,u as R}from"./chunk-YPECUWCB.js";import{Bb as a,Cb as i,D as F,Db as f,Eb as u,Fb as c,Kb as E,Mb as _,Ub as o,W as M,Wa as l,Yb as P,a as x,da as C,ha as b,p as w,pb as d,rb as h,wb as p,za as v}from"./chunk-6L47HEBJ.js";function Y(e,t){e&1&&(u(0),o(1," Username is required. "),c())}function ee(e,t){if(e&1&&(a(0,"mat-error"),d(1,Y,2,0,"ng-container"),i()),e&2){let n,r=_();l(),p((n=r.signupForm.get("username").errors)!=null&&n.required?1:-1)}}function te(e,t){e&1&&(u(0),o(1," Role is required. "),c())}function ne(e,t){if(e&1&&(a(0,"mat-error"),d(1,te,2,0,"ng-container"),i()),e&2){let n,r=_();l(),p((n=r.signupForm.get("role").errors)!=null&&n.required?1:-1)}}function ie(e,t){e&1&&(u(0),o(1," ID is required. "),c())}function oe(e,t){if(e&1&&(a(0,"mat-error"),d(1,ie,2,0,"ng-container"),i()),e&2){let n,r=_();l(),p((n=r.signupForm.get("id").errors)!=null&&n.required?1:-1)}}function re(e,t){e&1&&(u(0),o(1," Email is required. "),c())}function ae(e,t){e&1&&(u(0),o(1," Invalid email format. "),c())}function me(e,t){if(e&1&&(a(0,"mat-error"),d(1,re,2,0,"ng-container")(2,ae,2,0,"ng-container"),i()),e&2){let n,r=_();l(),p((n=r.signupForm.get("email").errors)!=null&&n.required?1:(n=r.signupForm.get("email").errors)!=null&&n.email?2:-1)}}function le(e,t){e&1&&(u(0),o(1," Password is required. "),c())}function de(e,t){e&1&&(u(0),o(1,"Password must be at least 8 characters long."),c())}function pe(e,t){e&1&&(u(0),o(1,"Password cannot exceed 32 characters."),c())}function se(e,t){e&1&&(u(0),o(1,"Password must include A-Z, a-z, 0-9, and special character."),c())}function ue(e,t){if(e&1&&(a(0,"mat-error"),d(1,le,2,0,"ng-container")(2,de,2,0,"ng-container")(3,pe,2,0,"ng-container")(4,se,2,0,"ng-container"),i()),e&2){let n,r=_();l(),p((n=r.signupForm.get("password").errors)!=null&&n.required?1:(n=r.signupForm.get("password").errors)!=null&&n.minlength?2:(n=r.signupForm.get("password").errors)!=null&&n.maxlength?3:(n=r.signupForm.get("password").errors)!=null&&n.pattern?4:-1)}}function ce(e,t){e&1&&f(0,"app-spinner")}function ge(e,t){e&1&&(a(0,"span"),o(1,"Submit"),i())}var Be=(()=>{let t=class t{constructor(){this.authService=C(T),this.destroyRef=C(v),this.formBuilder=C(N),this.dialog=C(L),this.loading=!1}ngOnInit(){this.initializeForm()}initializeForm(){this.signupForm=this.formBuilder.group({username:["",g.required],id:["",g.required],email:["",[g.required,g.email]],password:["",[g.required,g.minLength(8),g.maxLength(32),g.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,32}$/)]],role:["",g.required]})}onSubmit(){if(this.signupForm.markAllAsTouched(),this.signupForm.valid){this.loading=!0;let r=x({},this.signupForm.value);this.authService.signup(r).pipe(M(s=>{this.loading=!1,S(this.dialog,s.message,"close"),this.signupForm.reset()}),F(s=>(this.loading=!1,S(this.dialog,s.error.message,"close"),console.log(s),w(s))),R(this.destroyRef)).subscribe()}}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=b({type:t,selectors:[["app-signup"]],standalone:!0,features:[P],decls:39,vars:8,consts:[[1,"container"],[1,"form-wrapper"],[1,"form-title"],[3,"ngSubmit","formGroup"],[1,"full-width"],["matInput","","id","username","formControlName","username","placeholder","John Cena"],["id","role","formControlName","role"],["value","employee"],["value","staff"],["matInput","","id","id","formControlName","id","placeholder","BS123"],["matInput","","id","email","formControlName","email","placeholder","example@gmail.com"],["matInput","","id","password","type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"],["mat-flat-button","","type","submit",1,"submit-button",3,"disabled"]],template:function(s,m){s&1&&(a(0,"div",0)(1,"div",1)(2,"p",2)(3,"mat-icon"),o(4,"person_add"),i(),o(5," Add New User "),i(),a(6,"form",3),E("ngSubmit",function(){return m.onSubmit()}),a(7,"mat-form-field",4)(8,"mat-label"),o(9,"Username"),i(),f(10,"input",5),d(11,ee,2,1,"mat-error"),i(),a(12,"mat-form-field",4)(13,"mat-label"),o(14,"Role"),i(),a(15,"mat-select",6)(16,"mat-option",7),o(17,"Employee"),i(),a(18,"mat-option",8),o(19,"Staff"),i()(),d(20,ne,2,1,"mat-error"),i(),a(21,"mat-form-field",4)(22,"mat-label"),o(23,"ID"),i(),f(24,"input",9),d(25,oe,2,1,"mat-error"),i(),a(26,"mat-form-field",4)(27,"mat-label"),o(28,"Email"),i(),f(29,"input",10),d(30,me,3,1,"mat-error"),i(),a(31,"mat-form-field",4)(32,"mat-label"),o(33,"Password"),i(),f(34,"input",11),d(35,ue,5,1,"mat-error"),i(),a(36,"button",12),d(37,ce,1,0,"app-spinner")(38,ge,2,0,"span"),i()()()()),s&2&&(l(6),h("formGroup",m.signupForm),l(5),p(m.signupForm.get("username").invalid&&m.signupForm.get("username").touched?11:-1),l(9),p(m.signupForm.get("role").invalid&&m.signupForm.get("role").touched?20:-1),l(5),p(m.signupForm.get("id").invalid&&m.signupForm.get("id").touched?25:-1),l(5),p(m.signupForm.get("email").invalid&&m.signupForm.get("email").touched?30:-1),l(5),p(m.signupForm.get("password").invalid&&m.signupForm.get("password").touched?35:-1),l(),h("disabled",m.loading),l(),p(m.loading?37:38))},dependencies:[B,z,y,O,q,I,D,$,X,H,j,J,W,G,A,Q,K,k,U,Z,V],styles:[".container[_ngcontent-%COMP%]{min-height:90vh;display:flex;justify-content:center;align-items:center}.form-wrapper[_ngcontent-%COMP%]{padding:2rem;width:30%;background-color:#fff;box-shadow:0 .5rem 1rem #0000001a;display:flex;flex-direction:column}.form-title[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1.25rem;gap:.5rem;font-weight:500;color:#025dad}.full-width[_ngcontent-%COMP%]{width:100%}.submit-button[_ngcontent-%COMP%]{text-wrap:nowrap;font-size:.875rem}@media (max-width: 480px){.form-wrapper[_ngcontent-%COMP%]{padding:1.5rem;width:50%}.form-title[_ngcontent-%COMP%]{font-size:.875rem;gap:.25rem;margin-bottom:.75rem}.submit-button[_ngcontent-%COMP%]{font-size:.75rem}}@media (min-width: 481px) and (max-width: 768px){.form-wrapper[_ngcontent-%COMP%]{padding:1.5rem;width:40%}.form-title[_ngcontent-%COMP%]{font-size:.875rem;gap:.5rem;margin-bottom:.75rem}.submit-button[_ngcontent-%COMP%]{font-size:.75rem}}@media (min-width: 769px) and (max-width: 1024px){.form-wrapper[_ngcontent-%COMP%]{padding:1.75rem;width:40%}.form-title[_ngcontent-%COMP%]{font-size:1rem;gap:.5rem;margin-bottom:.75rem}.submit-button[_ngcontent-%COMP%]{font-size:.875rem}}"]});let e=t;return e})();export{Be as SignupComponent};
