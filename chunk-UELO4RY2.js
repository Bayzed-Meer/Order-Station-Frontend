import{a as te}from"./chunk-BP3CJ4HI.js";import{a as X,b as Y}from"./chunk-IH3R4FBH.js";import{a as h}from"./chunk-FQON5K5U.js";import{a as Z,b as ee}from"./chunk-2BGQ2KSS.js";import{Aa as $,Fa as j,Ga as H,Ha as L,Ia as U,Ja as J,Ma as K,Na as W,aa as D,ea as I,fa as R,ga as G,h as w,i as b,k as A,l as B,n as T,o as q,p as N,q as P,r as V,t as k,u as z}from"./chunk-YPECUWCB.js";import{Bb as e,Cb as t,D as x,Db as _,Eb as f,Fb as p,Kb as s,Mb as g,Ub as r,W as M,Wa as d,Yb as Q,a as y,da as v,ha as F,p as S,pb as u,rb as O,wb as c,za as E}from"./chunk-6L47HEBJ.js";function ne(n,m){n&1&&(f(0),r(1," Tea quantity is required. "),p())}function ie(n,m){if(n&1&&(e(0,"mat-error"),u(1,ne,2,0,"ng-container"),t()),n&2){let l,i=g();d(),c((l=i.beverageOrderForm.get("teaQuantity").errors)!=null&&l.required?1:-1)}}function re(n,m){n&1&&(f(0),r(1," Tea amount is required. "),p())}function oe(n,m){if(n&1&&(e(0,"mat-error"),u(1,re,2,0,"ng-container"),t()),n&2){let l,i=g();d(),c((l=i.beverageOrderForm.get("teaAmount").errors)!=null&&l.required?1:-1)}}function ae(n,m){n&1&&(f(0),r(1," Coffee quantity is required. "),p())}function me(n,m){if(n&1&&(e(0,"mat-error"),u(1,ae,2,0,"ng-container"),t()),n&2){let l,i=g();d(),c((l=i.beverageOrderForm.get("coffeeQuantity").errors)!=null&&l.required?1:-1)}}function le(n,m){n&1&&(f(0),r(1," Coffee amount is required. "),p())}function de(n,m){if(n&1&&(e(0,"mat-error"),u(1,le,2,0,"ng-container"),t()),n&2){let l,i=g();d(),c((l=i.beverageOrderForm.get("coffeeAmount").errors)!=null&&l.required?1:-1)}}function ue(n,m){n&1&&(f(0),r(1," Room number is required. "),p())}function ce(n,m){if(n&1&&(e(0,"mat-error"),u(1,ue,2,0,"ng-container"),t()),n&2){let l,i=g();d(),c((l=i.beverageOrderForm.get("roomNumber").errors)!=null&&l.required?1:-1)}}function fe(n,m){n&1&&_(0,"app-spinner")}function pe(n,m){n&1&&(e(0,"span"),r(1,"Submit"),t())}var Ve=(()=>{let m=class m{constructor(){this.orderService=v(te),this.formBuilder=v(V),this.dialog=v($),this.destroyRef=v(E),this.loading=!1}ngOnInit(){this.initializeForm(),this.onQuantityChange()}initializeForm(){this.beverageOrderForm=this.formBuilder.group({teaQuantity:[0,b.required],teaAmount:["",this.amountValidator("teaQuantity")],coffeeQuantity:[0,b.required],coffeeAmount:["",this.amountValidator("coffeeQuantity")],notes:[""],roomNumber:["",b.required]},{validator:this.validateTeaAndCoffee})}amountValidator(i){return a=>{let o=a.parent?.get(i);return o&&o.value>0&&!a.value?{required:!0}:null}}validateTeaAndCoffee(i){let a=i.get("teaQuantity").value,o=i.get("coffeeQuantity").value;return a===0&&o===0?{invalidBeverageOrder:!0}:null}onQuantityChange(){this.beverageOrderForm.get("teaQuantity").valueChanges.subscribe(()=>{this.beverageOrderForm.get("teaAmount")?.updateValueAndValidity()}),this.beverageOrderForm.get("coffeeQuantity").valueChanges.subscribe(()=>{this.beverageOrderForm.get("coffeeAmount")?.updateValueAndValidity()})}onSubmit(){if(this.beverageOrderForm.markAllAsTouched(),this.beverageOrderForm.valid){this.loading=!0;let i=y({},this.beverageOrderForm.value);this.orderService.createOrder(i).pipe(M(a=>{this.loading=!1,h(this.dialog,a.message,"close")}),x(a=>(this.loading=!1,h(this.dialog,a.error.message,"close"),console.log(a),S(a))),z(this.destroyRef)).subscribe()}}incrementQuantity(i){let a=this.beverageOrderForm.get(`${i}Quantity`).value;this.beverageOrderForm.get(`${i}Quantity`).setValue(a+1)}decrementQuantity(i){let a=this.beverageOrderForm.get(`${i}Quantity`).value;a>0&&this.beverageOrderForm.get(`${i}Quantity`).setValue(a-1)}};m.\u0275fac=function(a){return new(a||m)},m.\u0275cmp=F({type:m,selectors:[["app-beverage-order"]],standalone:!0,features:[Q],decls:69,vars:8,consts:[[1,"container"],[1,"form-wrapper"],[1,"form-title"],[3,"ngSubmit","formGroup"],[1,"input-group"],[1,"half-width"],[1,"quantity-controls"],["matInput","","formControlName","teaQuantity","type","number"],["mat-icon-button","","type","button",3,"click"],["formControlName","teaAmount"],["value","half"],["value","full"],["matInput","","formControlName","coffeeQuantity","type","number"],["formControlName","coffeeAmount"],[1,"full-width"],["formControlName","roomNumber"],["value","1"],["value","2"],["value","3"],["matInput","","formControlName","notes","rows","4"],["mat-flat-button","","type","submit",1,"submit-button",3,"disabled"]],template:function(a,o){a&1&&(e(0,"div",0)(1,"div",1)(2,"p",2)(3,"mat-icon"),r(4,"coffee"),t(),r(5," Order Beverage"),t(),e(6,"form",3),s("ngSubmit",function(){return o.onSubmit()}),e(7,"div",4)(8,"mat-form-field",5)(9,"mat-label"),r(10,"Tea"),t(),e(11,"div",6),_(12,"input",7),e(13,"button",8),s("click",function(){return o.incrementQuantity("tea")}),e(14,"mat-icon"),r(15,"add"),t()(),e(16,"button",8),s("click",function(){return o.decrementQuantity("tea")}),e(17,"mat-icon"),r(18,"remove"),t()()(),u(19,ie,2,1,"mat-error"),t(),e(20,"mat-form-field",5)(21,"mat-label"),r(22,"Tea Amount"),t(),e(23,"mat-select",9)(24,"mat-option",10),r(25,"Half"),t(),e(26,"mat-option",11),r(27,"Full"),t()(),u(28,oe,2,1,"mat-error"),t()(),e(29,"div",4)(30,"mat-form-field",5)(31,"mat-label"),r(32,"Coffee"),t(),e(33,"div",6),_(34,"input",12),e(35,"button",8),s("click",function(){return o.incrementQuantity("coffee")}),e(36,"mat-icon"),r(37,"add"),t()(),e(38,"button",8),s("click",function(){return o.decrementQuantity("coffee")}),e(39,"mat-icon"),r(40,"remove"),t()()(),u(41,me,2,1,"mat-error"),t(),e(42,"mat-form-field",5)(43,"mat-label"),r(44,"Coffee Amount"),t(),e(45,"mat-select",13)(46,"mat-option",10),r(47,"Half "),t(),e(48,"mat-option",11),r(49,"Full "),t()(),u(50,de,2,1,"mat-error"),t()(),e(51,"mat-form-field",14)(52,"mat-label"),r(53,"Room Number"),t(),e(54,"mat-select",15)(55,"mat-option",16),r(56,"1"),t(),e(57,"mat-option",17),r(58,"2"),t(),e(59,"mat-option",18),r(60,"3"),t()(),u(61,ce,2,1,"mat-error"),t(),e(62,"mat-form-field",14)(63,"mat-label"),r(64,"Additional Notes"),t(),_(65,"textarea",19),t(),e(66,"button",20),u(67,fe,1,0,"app-spinner")(68,pe,2,0,"span"),t()()()()),a&2&&(d(6),O("formGroup",o.beverageOrderForm),d(13),c(o.beverageOrderForm.get("teaQuantity").invalid&&o.beverageOrderForm.get("teaQuantity").touched?19:-1),d(9),c(o.beverageOrderForm.get("teaAmount").invalid&&o.beverageOrderForm.get("teaAmount").touched?28:-1),d(13),c(o.beverageOrderForm.get("coffeeQuantity").invalid&&o.beverageOrderForm.get("coffeeQuantity").touched?41:-1),d(9),c(o.beverageOrderForm.get("coffeeAmount").invalid&&o.beverageOrderForm.get("coffeeAmount").touched?50:-1),d(11),c(o.beverageOrderForm.get("roomNumber").invalid&&o.beverageOrderForm.get("roomNumber").touched?61:-1),d(5),O("disabled",o.loading),d(),c(o.loading?67:68))},dependencies:[k,T,w,q,A,B,N,P,L,ee,K,U,J,Z,D,W,Y,X,H,j,G,I,R],styles:[".container[_ngcontent-%COMP%]{min-height:90vh;display:flex;justify-content:center;align-items:center}.form-wrapper[_ngcontent-%COMP%]{padding:2rem;width:30%;background-color:#fff;box-shadow:0 .5rem 1rem #0000001a}.form-title[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1.25rem;gap:.5rem;font-weight:500;color:#025dad}.full-width[_ngcontent-%COMP%]{width:100%}.input-group[_ngcontent-%COMP%]{display:flex;gap:1rem}.half-width[_ngcontent-%COMP%]{width:50%}.quantity-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.submit-button[_ngcontent-%COMP%]{font-size:.875rem;text-wrap:nowrap}@media (max-width: 480px){.form-wrapper[_ngcontent-%COMP%]{padding:1.5rem;width:50%}.form-title[_ngcontent-%COMP%]{font-size:.875rem;gap:.5rem;margin-bottom:.75rem}.submit-button[_ngcontent-%COMP%]{font-size:.75rem}.input-group[_ngcontent-%COMP%]{gap:.5rem}}@media (min-width: 481px) and (max-width: 768px){.form-wrapper[_ngcontent-%COMP%]{padding:1.5rem;width:40%}.form-title[_ngcontent-%COMP%]{font-size:1rem;gap:.5rem;margin-bottom:.75rem}.submit-button[_ngcontent-%COMP%]{font-size:.75rem}.input-group[_ngcontent-%COMP%]{gap:.5rem}}@media (min-width: 769px) and (max-width: 1024px){.form-wrapper[_ngcontent-%COMP%]{padding:1.5rem;width:40%}.form-title[_ngcontent-%COMP%]{font-size:1.25rem;gap:.5rem;margin-bottom:1rem}.submit-button[_ngcontent-%COMP%]{font-size:.875rem}}"]});let n=m;return n})();export{Ve as BeverageOrderComponent};
