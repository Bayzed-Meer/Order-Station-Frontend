import{a as J}from"./chunk-S34G7OME.js";import{a as T}from"./chunk-AB2WVV2A.js";import{a as W,b as X}from"./chunk-AGNVOT4A.js";import{a as S}from"./chunk-QS4TB3GR.js";import{a as Y,b as ee}from"./chunk-DQVMZKPK.js";import{Aa as V,Fa as j,Ga as Z,Ha as H,Ia as K,La as Q,aa as $,ea as k,ga as L,h as O,i as c,k as q,l as z,n as N,p as D,q as A,r as B,s as R,t as G,u as U}from"./chunk-VPTYPPTQ.js";import{Ab as m,Bb as n,Cb as f,Cc as P,D as w,Db as u,Eb as g,Jb as b,Lb as _,Tb as i,W as E,Wa as r,Xb as y,a as x,da as h,ha as M,p as v,pb as d,rb as o,xc as I,za as F}from"./chunk-BTNHTO55.js";function te(e,t){e&1&&(u(0),i(1," Username is required. "),g())}function ne(e,t){if(e&1&&(m(0,"mat-error"),d(1,te,2,0,"ng-container",6),n()),e&2){let s,p=_();r(),o("ngIf",(s=p.signupForm.get("username").errors)==null?null:s.required)}}function ie(e,t){e&1&&(u(0),i(1," Role is required. "),g())}function re(e,t){if(e&1&&(m(0,"mat-error"),d(1,ie,2,0,"ng-container",6),n()),e&2){let s,p=_();r(),o("ngIf",(s=p.signupForm.get("role").errors)==null?null:s.required)}}function oe(e,t){e&1&&(u(0),i(1," ID is required. "),g())}function ae(e,t){if(e&1&&(m(0,"mat-error"),d(1,oe,2,0,"ng-container",6),n()),e&2){let s,p=_();r(),o("ngIf",(s=p.signupForm.get("id").errors)==null?null:s.required)}}function me(e,t){e&1&&(u(0),i(1," Email is required. "),g())}function le(e,t){e&1&&(u(0),i(1," Invalid email format. "),g())}function pe(e,t){if(e&1&&(m(0,"mat-error"),d(1,me,2,0,"ng-container",6)(2,le,2,0,"ng-container",6),n()),e&2){let s,p,l=_();r(),o("ngIf",(s=l.signupForm.get("email").errors)==null?null:s.required),r(),o("ngIf",(p=l.signupForm.get("email").errors)==null?null:p.email)}}function se(e,t){e&1&&(u(0),i(1," Password is required. "),g())}function de(e,t){e&1&&(u(0),i(1," Password must be at least 8 characters long. "),g())}function ue(e,t){e&1&&(u(0),i(1," Password cannot exceed 32 characters. "),g())}function ge(e,t){e&1&&(u(0),i(1," Password must contain at least one uppercase letter, one lowercase letter, one digit, and one special character (e.g., '@', #, $, etc.). "),g())}function ce(e,t){if(e&1&&(m(0,"mat-error"),d(1,se,2,0,"ng-container",6)(2,de,2,0,"ng-container",6)(3,ue,2,0,"ng-container",6)(4,ge,2,0,"ng-container",6),n()),e&2){let s,p,l,a,C=_();r(),o("ngIf",(s=C.signupForm.get("password").errors)==null?null:s.required),r(),o("ngIf",(p=C.signupForm.get("password").errors)==null?null:p.minlength),r(),o("ngIf",(l=C.signupForm.get("password").errors)==null?null:l.maxlength),r(),o("ngIf",(a=C.signupForm.get("password").errors)==null?null:a.pattern)}}function fe(e,t){e&1&&(u(0),f(1,"app-spinner"),g())}function _e(e,t){e&1&&(u(0),m(1,"span"),i(2,"Submit"),n(),g())}var Ue=(()=>{let t=class t{constructor(){this.authService=h(T),this.destroyRef=h(F),this.formBuilder=h(B),this.dialog=h(V),this.loading=!1}ngOnInit(){this.initializeForm()}initializeForm(){this.signupForm=this.formBuilder.group({username:["",c.required],id:["",c.required],email:["",[c.required,c.email]],password:["",[c.required,c.minLength(8),c.maxLength(32),c.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,32}$/)]],role:["",c.required]})}onSubmit(){if(this.signupForm.markAllAsTouched(),this.signupForm.valid){this.loading=!0;let p=x({},this.signupForm.value);this.authService.signup(p).pipe(E(l=>{this.loading=!1,S(this.dialog,l.message,"close"),this.signupForm.reset()}),w(l=>(this.loading=!1,S(this.dialog,l.error.message,"close"),console.log(l),v(l))),U(this.destroyRef)).subscribe()}}};t.\u0275fac=function(l){return new(l||t)},t.\u0275cmp=M({type:t,selectors:[["app-signup"]],standalone:!0,features:[y],decls:39,vars:9,consts:[[1,"container"],[1,"form-wrapper"],[1,"form-title"],[3,"ngSubmit","formGroup"],[1,"full-width"],["matInput","","id","username","formControlName","username","placeholder","John Cena"],[4,"ngIf"],["id","role","formControlName","role"],["value","employee"],["value","staff"],["matInput","","id","id","formControlName","id","placeholder","BS123"],["matInput","","id","email","formControlName","email","placeholder","example@gmail.com"],["matInput","","id","password","type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"],["mat-flat-button","","type","submit",1,"submit-button",3,"disabled"]],template:function(l,a){l&1&&(m(0,"div",0)(1,"div",1)(2,"p",2)(3,"mat-icon"),i(4,"person_add"),n(),i(5," Add New User "),n(),m(6,"form",3),b("ngSubmit",function(){return a.onSubmit()}),m(7,"mat-form-field",4)(8,"mat-label"),i(9,"Username"),n(),f(10,"input",5),d(11,ne,2,1,"mat-error",6),n(),m(12,"mat-form-field",4)(13,"mat-label"),i(14,"Role"),n(),m(15,"mat-select",7)(16,"mat-option",8),i(17,"Employee"),n(),m(18,"mat-option",9),i(19,"Staff"),n()(),d(20,re,2,1,"mat-error",6),n(),m(21,"mat-form-field",4)(22,"mat-label"),i(23,"ID"),n(),f(24,"input",10),d(25,ae,2,1,"mat-error",6),n(),m(26,"mat-form-field",4)(27,"mat-label"),i(28,"Email"),n(),f(29,"input",11),d(30,pe,3,2,"mat-error",6),n(),m(31,"mat-form-field",4)(32,"mat-label"),i(33,"Password"),n(),f(34,"input",12),d(35,ce,5,4,"mat-error",6),n(),m(36,"button",13),d(37,fe,2,0,"ng-container",6)(38,_e,3,0,"ng-container",6),n()()()()),l&2&&(r(6),o("formGroup",a.signupForm),r(5),o("ngIf",a.signupForm.get("username").invalid&&a.signupForm.get("username").touched),r(9),o("ngIf",a.signupForm.get("role").invalid&&a.signupForm.get("role").touched),r(5),o("ngIf",a.signupForm.get("id").invalid&&a.signupForm.get("id").touched),r(5),o("ngIf",a.signupForm.get("email").invalid&&a.signupForm.get("email").touched),r(5),o("ngIf",a.signupForm.get("password").invalid&&a.signupForm.get("password").touched),r(),o("disabled",a.loading),r(),o("ngIf",a.loading),r(),o("ngIf",!a.loading))},dependencies:[P,I,G,N,O,q,z,D,A,J,ee,Q,H,K,Y,$,R,X,W,L,k,Z,j],styles:[".container[_ngcontent-%COMP%]{min-height:90vh;display:flex;justify-content:center;align-items:center}.form-wrapper[_ngcontent-%COMP%]{padding:2rem;width:30%;background-color:#fff;box-shadow:0 .5rem 1rem #0000001a;display:flex;flex-direction:column}.form-title[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1.25rem;gap:.5rem;font-weight:500;color:#025dad}.full-width[_ngcontent-%COMP%]{width:100%}.submit-button[_ngcontent-%COMP%]{text-wrap:nowrap;font-size:.875rem}@media (max-width: 480px){.form-wrapper[_ngcontent-%COMP%]{padding:1.5rem;width:50%}.form-title[_ngcontent-%COMP%]{font-size:.875rem;gap:.25rem;margin-bottom:.75rem}.submit-button[_ngcontent-%COMP%]{font-size:.75rem}}@media (min-width: 481px) and (max-width: 768px){.form-wrapper[_ngcontent-%COMP%]{padding:1.5rem;width:40%}.form-title[_ngcontent-%COMP%]{font-size:.875rem;gap:.5rem;margin-bottom:.75rem}.submit-button[_ngcontent-%COMP%]{font-size:.75rem}}@media (min-width: 769px) and (max-width: 1024px){.form-wrapper[_ngcontent-%COMP%]{padding:1.75rem;width:40%}.form-title[_ngcontent-%COMP%]{font-size:1rem;gap:.5rem;margin-bottom:.75rem}.submit-button[_ngcontent-%COMP%]{font-size:.875rem}}"]});let e=t;return e})();export{Ue as SignupComponent};
