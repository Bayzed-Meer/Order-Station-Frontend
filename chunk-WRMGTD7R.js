import{a as te}from"./chunk-RPPOXAAJ.js";import{a as $,b as ee}from"./chunk-4RKGKIHI.js";import{a as x}from"./chunk-73G7AXVQ.js";import{A as _,Oa as G,Ta as j,Ua as H,Va as L,Wa as J,Xa as K,ab as W,bb as X,cb as Y,db as Z,j as P,l as b,la as I,o as B,p as Q,pa as k,ra as U,t as T,u as V,v as q,w as z,x as R,z as D}from"./chunk-JKOZUD4R.js";import{$b as N,Bb as n,Cb as t,D as M,Db as O,Eb as g,Fb as v,Kb as w,Mb as C,Ub as i,W as c,Wa as d,a as S,da as h,ha as E,p as F,pb as u,rb as y,wb as s,za as A}from"./chunk-EBQJBUXN.js";function ne(e,a){e&1&&(g(0),i(1," Tea is required. "),v())}function ie(e,a){if(e&1&&(n(0,"mat-error"),u(1,ne,2,0,"ng-container"),t()),e&2){let l,r=C();d(),s((l=r.beverageOrderForm.get("teaQuantity").errors)!=null&&l.required?1:-1)}}function re(e,a){e&1&&(g(0),i(1," Amount is required. "),v())}function oe(e,a){if(e&1&&(n(0,"mat-error"),u(1,re,2,0,"ng-container"),t()),e&2){let l,r=C();d(),s((l=r.beverageOrderForm.get("teaAmount").errors)!=null&&l.required?1:-1)}}function ae(e,a){e&1&&(g(0),i(1," Coffee is required. "),v())}function me(e,a){if(e&1&&(n(0,"mat-error"),u(1,ae,2,0,"ng-container"),t()),e&2){let l,r=C();d(),s((l=r.beverageOrderForm.get("coffeeQuantity").errors)!=null&&l.required?1:-1)}}function le(e,a){e&1&&(g(0),i(1," Amount is required. "),v())}function de(e,a){if(e&1&&(n(0,"mat-error"),u(1,le,2,0,"ng-container"),t()),e&2){let l,r=C();d(),s((l=r.beverageOrderForm.get("coffeeAmount").errors)!=null&&l.required?1:-1)}}function ue(e,a){e&1&&(g(0),i(1," Room number is required. "),v())}function se(e,a){if(e&1&&(n(0,"mat-error"),u(1,ue,2,0,"ng-container"),t()),e&2){let l,r=C();d(),s((l=r.beverageOrderForm.get("roomNumber").errors)!=null&&l.required?1:-1)}}function fe(e,a){e&1&&O(0,"app-spinner")}function pe(e,a){e&1&&(n(0,"span"),i(1,"Submit"),t())}var qe=(()=>{let a=class a{constructor(){this.orderService=h(te),this.formBuilder=h(R),this.dialog=h(G),this.destroyRef=h(A),this.loading=!1}ngOnInit(){this.initializeForm(),this.setUpValidators()}initializeForm(){this.beverageOrderForm=this.formBuilder.group({teaQuantity:[null],teaAmount:[""],coffeeQuantity:[null],coffeeAmount:[""],notes:[""],roomNumber:["",b.required]},{validator:this.validateTeaAndCoffee})}setUpValidators(){let r=this.beverageOrderForm.get("teaQuantity"),m=this.beverageOrderForm.get("coffeeQuantity"),o=this.beverageOrderForm.get("teaAmount"),p=this.beverageOrderForm.get("coffeeAmount");r?.valueChanges.pipe(c(f=>{o?.setValidators(f>0?b.required:null),o?.updateValueAndValidity()}),_(this.destroyRef)).subscribe(),m?.valueChanges.pipe(c(f=>{p?.setValidators(f>0?b.required:null),p?.updateValueAndValidity()}),_(this.destroyRef)).subscribe(),o?.valueChanges.pipe(c(f=>{r?.setValidators(f==="half"||f==="full"?b.required:null),r?.updateValueAndValidity()}),_(this.destroyRef)).subscribe(),p?.valueChanges.pipe(c(f=>{m?.setValidators(f==="half"||f==="full"?b.required:null),m?.updateValueAndValidity()}),_(this.destroyRef)).subscribe()}validateTeaAndCoffee(r){let m=r.get("teaQuantity")?.value,o=r.get("coffeeQuantity")?.value,p=r.get("teaAmount")?.value,f=r.get("coffeeAmount")?.value;return m===null&&o===null&&p===""&&f===""?{invalidBeverageOrder:!0}:m<=0||o<=0?{invalidQuantity:!0}:null}checkPopUp(){this.beverageOrderForm.errors?.invalidBeverageOrder&&!this.beverageOrderForm.get("roomNumber")?.errors?.required?x(this.dialog,"Please select at least one between tea or coffee.","Close"):this.beverageOrderForm.errors?.invalidQuantity&&x(this.dialog,"Quantity must be greater then zero","Close")}onSubmit(){if(this.beverageOrderForm.markAllAsTouched(),this.checkPopUp(),this.beverageOrderForm.valid){console.log(this.beverageOrderForm.value),this.loading=!0;let r=S({},this.beverageOrderForm.value);this.orderService.createOrder(r).pipe(c(m=>{this.loading=!1,x(this.dialog,m.message,"close")}),M(m=>(this.loading=!1,x(this.dialog,m.error.message,"close"),console.log(m),F(m))),_(this.destroyRef)).subscribe()}}};a.\u0275fac=function(m){return new(m||a)},a.\u0275cmp=E({type:a,selectors:[["app-beverage-order"]],standalone:!0,features:[N],decls:59,vars:8,consts:[[1,"container"],[1,"form-wrapper"],[1,"form-title"],[3,"ngSubmit","formGroup"],[1,"input-group"],[1,"half-width"],["matInput","","formControlName","teaQuantity","type","number"],["formControlName","teaAmount"],["value","half"],["value","full"],["value",""],["matInput","","formControlName","coffeeQuantity","type","number"],["formControlName","coffeeAmount"],[1,"full-width"],["formControlName","roomNumber"],["value","1"],["value","2"],["value","3"],["matInput","","formControlName","notes","rows","4"],["mat-flat-button","","type","submit",1,"submit-button",3,"disabled"]],template:function(m,o){m&1&&(n(0,"div",0)(1,"div",1)(2,"p",2)(3,"mat-icon"),i(4,"coffee"),t(),i(5," Order Beverage"),t(),n(6,"form",3),w("ngSubmit",function(){return o.onSubmit()}),n(7,"div",4)(8,"mat-form-field",5)(9,"mat-label"),i(10,"Tea"),t(),O(11,"input",6),u(12,ie,2,1,"mat-error"),t(),n(13,"mat-form-field",5)(14,"mat-label"),i(15,"Amount"),t(),n(16,"mat-select",7)(17,"mat-option",8),i(18,"Half"),t(),n(19,"mat-option",9),i(20,"Full"),t(),n(21,"mat-option",10),i(22,"N/A"),t()(),u(23,oe,2,1,"mat-error"),t()(),n(24,"div",4)(25,"mat-form-field",5)(26,"mat-label"),i(27,"Coffee"),t(),O(28,"input",11),u(29,me,2,1,"mat-error"),t(),n(30,"mat-form-field",5)(31,"mat-label"),i(32,"Amount"),t(),n(33,"mat-select",12)(34,"mat-option",8),i(35,"Half "),t(),n(36,"mat-option",9),i(37,"Full "),t(),n(38,"mat-option",10),i(39,"N/A"),t()(),u(40,de,2,1,"mat-error"),t()(),n(41,"mat-form-field",13)(42,"mat-label"),i(43,"Room Number"),t(),n(44,"mat-select",14)(45,"mat-option",15),i(46,"1"),t(),n(47,"mat-option",16),i(48,"2"),t(),n(49,"mat-option",17),i(50,"3"),t()(),u(51,se,2,1,"mat-error"),t(),n(52,"mat-form-field",13)(53,"mat-label"),i(54,"Additional Notes"),t(),O(55,"textarea",18),t(),n(56,"button",19),u(57,fe,1,0,"app-spinner")(58,pe,2,0,"span"),t()()()()),m&2&&(d(6),y("formGroup",o.beverageOrderForm),d(6),s(o.beverageOrderForm.get("teaQuantity").invalid&&o.beverageOrderForm.get("teaQuantity").touched?12:-1),d(11),s(o.beverageOrderForm.get("teaAmount").invalid&&o.beverageOrderForm.get("teaAmount").touched?23:-1),d(6),s(o.beverageOrderForm.get("coffeeQuantity").invalid&&o.beverageOrderForm.get("coffeeQuantity").touched?29:-1),d(11),s(o.beverageOrderForm.get("coffeeAmount").invalid&&o.beverageOrderForm.get("coffeeAmount").touched?40:-1),d(11),s(o.beverageOrderForm.get("roomNumber").invalid&&o.beverageOrderForm.get("roomNumber").touched?51:-1),d(5),y("disabled",o.loading),d(),s(o.loading?57:58))},dependencies:[D,T,P,V,B,Q,q,z,L,ee,W,J,K,$,I,X,Z,Y,H,j,U,k],styles:[".container[_ngcontent-%COMP%]{min-height:90vh;display:flex;justify-content:center;align-items:center}.form-wrapper[_ngcontent-%COMP%]{padding:2rem;width:30%;background-color:#fff;box-shadow:0 .5rem 1rem #0000001a}.form-title[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1.25rem;gap:.5rem;font-weight:500;color:#025dad}.full-width[_ngcontent-%COMP%]{width:100%}.input-group[_ngcontent-%COMP%]{display:flex;gap:1rem}.half-width[_ngcontent-%COMP%]{width:50%}.quantity-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.submit-button[_ngcontent-%COMP%]{font-size:.875rem;text-wrap:nowrap}@media (max-width: 480px){.form-wrapper[_ngcontent-%COMP%]{padding:1.5rem;width:70%}.form-title[_ngcontent-%COMP%]{font-size:.875rem;gap:.5rem;margin-bottom:.75rem}.submit-button[_ngcontent-%COMP%]{font-size:.75rem}.input-group[_ngcontent-%COMP%]{gap:.5rem}}@media (min-width: 481px) and (max-width: 768px){.form-wrapper[_ngcontent-%COMP%]{padding:1.5rem;width:40%}.form-title[_ngcontent-%COMP%]{font-size:1rem;gap:.5rem;margin-bottom:.75rem}.submit-button[_ngcontent-%COMP%]{font-size:.75rem}.input-group[_ngcontent-%COMP%]{gap:.5rem}}@media (min-width: 769px) and (max-width: 1024px){.form-wrapper[_ngcontent-%COMP%]{padding:1.5rem;width:40%}.form-title[_ngcontent-%COMP%]{font-size:1.25rem;gap:.5rem;margin-bottom:1rem}.submit-button[_ngcontent-%COMP%]{font-size:.875rem}}"]});let e=a;return e})();export{qe as BeverageOrderComponent};
