import{a as fe}from"./chunk-PMC553EE.js";import{a as ue}from"./chunk-BP3CJ4HI.js";import{a as j}from"./chunk-6GFOBDWL.js";import{a as pe}from"./chunk-SWOLHGBV.js";import{a as K,b as W,c as X,d as Z,e as ee,f as te,g as ne,h as ie,i as re,j as oe,k as ae,l as me,m as le,n as y,o as de,p as v,q as ce,r as se}from"./chunk-64TEYA7P.js";import{a as O}from"./chunk-FQON5K5U.js";import"./chunk-2BGQ2KSS.js";import{Aa as L,Fa as Y,Ga as G,Ha as J,ea as F,ga as q,u as _}from"./chunk-YPECUWCB.js";import{$b as Q,Bb as n,Cb as i,D as S,Db as b,Eb as s,Fb as p,Hb as T,Kb as D,Mb as C,Qb as R,Rb as A,Sb as z,Ub as o,Vb as u,W as g,Wa as m,Wb as H,Yb as V,Zb as U,_b as I,da as M,ha as $,p as x,pb as d,qb as N,ra as P,rb as h,sa as w,wb as E,za as k,zc as B}from"./chunk-6L47HEBJ.js";var Ce=()=>[5,10,25];function _e(e,t){e&1&&(n(0,"th",23),o(1,"Username"),i())}function ge(e,t){if(e&1&&(n(0,"td",24),o(1),i()),e&2){let r=t.$implicit;m(),u(r.username||"-")}}function he(e,t){e&1&&(n(0,"th",23),o(1,"ID"),i())}function Oe(e,t){if(e&1&&(n(0,"td",24),o(1),i()),e&2){let r=t.$implicit;m(),u(r.employeeID||"-")}}function xe(e,t){e&1&&(n(0,"th",23),o(1,"Tea Quantity"),i())}function Se(e,t){if(e&1&&(n(0,"td",24),o(1),i()),e&2){let r=t.$implicit;m(),u(r.teaQuantity||"-")}}function Me(e,t){e&1&&(n(0,"th",25),o(1,"Tea Amount"),i())}function be(e,t){if(e&1&&(n(0,"td",24),o(1),i()),e&2){let r=t.$implicit;m(),u(r.teaAmount||"-")}}function ye(e,t){e&1&&(n(0,"th",23),o(1,"Coffee Quantity"),i())}function ve(e,t){if(e&1&&(n(0,"td",24),o(1),i()),e&2){let r=t.$implicit;m(),u(r.coffeeQuantity||"-")}}function Pe(e,t){e&1&&(n(0,"th",25),o(1,"Coffee Amount"),i())}function we(e,t){if(e&1&&(n(0,"td",24),o(1),i()),e&2){let r=t.$implicit;m(),u(r.coffeeAmount||"-")}}function Ee(e,t){e&1&&(n(0,"th",25),o(1,"Notes"),i())}function Te(e,t){if(e&1&&(n(0,"td",24),o(1),i()),e&2){let r=t.$implicit;m(),u(r.notes||"-")}}function De(e,t){e&1&&(n(0,"th",23),o(1,"Room Number"),i())}function Re(e,t){if(e&1&&(n(0,"td",24),o(1),i()),e&2){let r=t.$implicit;m(),u(r.roomNumber||"-")}}function Ae(e,t){e&1&&(n(0,"th",23),o(1,"Created At"),i())}function ze(e,t){if(e&1&&(n(0,"td",24),o(1),I(2,"timesAgo"),i()),e&2){let r=t.$implicit;m(),u(Q(2,1,r.createdAt))}}function Ie(e,t){e&1&&(n(0,"th",23),o(1,"Order Status"),i())}function Qe(e,t){if(e&1&&(n(0,"td",24),o(1),I(2,"titlecase"),i()),e&2){let r=t.$implicit;m(),H(" ",Q(2,1,r.orderStatus)," ")}}function $e(e,t){e&1&&(n(0,"th",25),o(1,"Actions"),i())}function ke(e,t){if(e&1){let r=T();n(0,"button",30),D("click",function(){P(r);let a=C().$implicit,c=C();return w(a.orderStatus==="in progress"?c.completeOrder(a._id):c.approveOrder(a._id))}),n(1,"mat-icon"),o(2),i(),n(3,"span",29),o(4),i()()}if(e&2){let r=C().$implicit;m(2),u(r.orderStatus==="in progress"?"done_all":"check_circle"),m(2),u(r.orderStatus==="in progress"?"Delivered":"Approve")}}function Ne(e,t){if(e&1){let r=T();n(0,"td",26),d(1,ke,5,2,"button",27),n(2,"button",28),D("click",function(){let a=P(r).$implicit,c=C();return w(c.cancelOrder(a._id))}),n(3,"mat-icon"),o(4,"cancel"),i(),n(5,"span",29),o(6,"Cancel"),i()()()}if(e&2){let r=t.$implicit,l=C();m(),E(l.role!=="employee"?1:-1),m(),h("disabled",r.orderStatus==="in progress"&&l.role==="employee")}}function He(e,t){e&1&&(n(0,"div",32),b(1,"app-spinner"),i())}function Ve(e,t){e&1&&(n(0,"div",33)(1,"mat-icon"),o(2,"search_off"),i(),n(3,"div"),o(4,"No orders found"),i()())}function Ue(e,t){if(e&1&&(n(0,"tr",31)(1,"td"),d(2,He,2,0,"div",32)(3,Ve,5,0,"div",33),i()()),e&2){let r=C();m(),N("colspan",r.displayedColumns.length),m(),E(r.loading?2:3)}}function Be(e,t){e&1&&b(0,"tr",34)}function je(e,t){e&1&&b(0,"tr",35)}var ft=(()=>{let t=class t{constructor(){this.dialog=M(L),this.orderService=M(ue),this.authService=M(j),this.destroyRef=M(k),this.role="",this.loading=!0,this.displayedColumns=[],this.dataSource=new le}ngOnInit(){this.checkRole(),this.setUpTableColumn(),this.getOrders(),this.initializeOrderUpdates()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}checkRole(){this.authService.getRole().pipe(g(l=>this.role=l),_(this.destroyRef)).subscribe()}setUpTableColumn(){this.displayedColumns=this.role!=="employee"?["username","id","teaQuantity","teaAmount","coffeeQuantity","coffeeAmount","notes","roomNumber","createdAt","orderStatus","actions"]:["teaQuantity","teaAmount","coffeeQuantity","coffeeAmount","notes","roomNumber","createdAt","orderStatus","actions"]}getOrders(){this.orderService.getCurrentOrders().pipe(g(l=>{this.dataSource.data=l,this.loading=!1}),S(l=>(O(this.dialog,l.error.message,"close"),console.log(l),this.loading=!1,x([]))),_(this.destroyRef)).subscribe()}initializeOrderUpdates(){this.orderService.getOrderUpdates().pipe(_(this.destroyRef)).subscribe(()=>{this.getOrders()})}approveOrder(l){this.orderService.aprroveOrder(l).pipe(g(()=>{this.getOrders()}),S(a=>(O(this.dialog,a.error.message,"close"),console.log(a),x(a))),_(this.destroyRef)).subscribe()}completeOrder(l){this.orderService.completeOrder(l).pipe(g(()=>{this.getOrders()}),S(a=>(O(this.dialog,a.error.message,"close"),console.log(a),x(a))),_(this.destroyRef)).subscribe()}cancelOrder(l){this.dialog.open(pe,{width:"300px",data:{message:"Are you sure you want to cancel this order?",confirmButtonLabel:"Yes",cancelButtonLabel:"No"}}).afterClosed().subscribe(c=>{c==="confirm"&&this.orderService.cancelOrder(l,this.role).pipe(g(f=>{this.getOrders(),O(this.dialog,f.message,"close")}),S(f=>(O(this.dialog,f.error.message,"close"),console.log(f),x(f))),_(this.destroyRef)).subscribe()})}};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=$({type:t,selectors:[["app-current-orders"]],viewQuery:function(a,c){if(a&1&&(R(y,5),R(v,5)),a&2){let f;A(f=z())&&(c.paginator=f.first),A(f=z())&&(c.sort=f.first)}},standalone:!0,features:[V],decls:44,vars:5,consts:[[1,"container"],[1,"title"],[1,"table-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","username"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["matColumnDef","teaQuantity"],["matColumnDef","teaAmount"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","coffeeQuantity"],["matColumnDef","coffeeAmount"],["matColumnDef","notes"],["matColumnDef","roomNumber"],["matColumnDef","createdAt"],["matColumnDef","orderStatus"],["matColumnDef","actions"],["mat-cell","","class","actions-cell",4,"matCellDef"],["class","no-data-row",4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page of orders",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"actions-cell"],["mat-flat-button","","color","primary"],["mat-flat-button","","color","warn",3,"click","disabled"],[1,"button-text"],["mat-flat-button","","color","primary",3,"click"],[1,"no-data-row"],[1,"spinner"],[1,"no-data-content"],["mat-header-row",""],["mat-row",""]],template:function(a,c){a&1&&(n(0,"div",0)(1,"div",1)(2,"mat-icon"),o(3,"shopping_cart"),i(),o(4," Current Orders"),i(),n(5,"div",2)(6,"table",3),s(7,4),d(8,_e,2,0,"th",5)(9,ge,2,1,"td",6),p(),s(10,7),d(11,he,2,0,"th",5)(12,Oe,2,1,"td",6),p(),s(13,8),d(14,xe,2,0,"th",5)(15,Se,2,1,"td",6),p(),s(16,9),d(17,Me,2,0,"th",10)(18,be,2,1,"td",6),p(),s(19,11),d(20,ye,2,0,"th",5)(21,ve,2,1,"td",6),p(),s(22,12),d(23,Pe,2,0,"th",10)(24,we,2,1,"td",6),p(),s(25,13),d(26,Ee,2,0,"th",10)(27,Te,2,1,"td",6),p(),s(28,14),d(29,De,2,0,"th",5)(30,Re,2,1,"td",6),p(),s(31,15),d(32,Ae,2,0,"th",5)(33,ze,3,3,"td",6),p(),s(34,16),d(35,Ie,2,0,"th",5)(36,Qe,3,3,"td",6),p(),s(37,17),d(38,$e,2,0,"th",10)(39,Ne,7,2,"td",18),p(),d(40,Ue,4,2,"tr",19)(41,Be,1,0,"tr",20)(42,je,1,0,"tr",21),i(),b(43,"mat-paginator",22),i()()),a&2&&(m(6),h("dataSource",c.dataSource),m(35),h("matHeaderRowDef",c.displayedColumns),m(),h("matRowDefColumns",c.displayedColumns),m(),h("pageSizeOptions",U(4,Ce)))},dependencies:[me,K,X,ne,Z,W,ie,ee,te,re,oe,ae,se,v,ce,de,y,G,Y,q,F,B,fe,J],styles:[".container[_ngcontent-%COMP%]{padding:1.5rem 2rem}.title[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:1rem;background-color:#024988;color:#f0eeee;font-size:1.25rem;padding:.5rem;gap:.5rem;font-weight:500}.table-container[_ngcontent-%COMP%]{box-shadow:0 .5rem 1rem #0000001a;padding:1rem;background-color:#fff}.table-container[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#024988;color:#fff}.table-container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem}.table-container[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{color:#000}.actions-cell[_ngcontent-%COMP%]{display:flex;gap:.25rem}.spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.no-data-row[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:.25rem;font-size:1.25rem;font-weight:500;color:#025dad}@media (max-width: 480px){.container[_ngcontent-%COMP%]{padding:1rem 1.75rem}.title[_ngcontent-%COMP%]{margin-bottom:.5rem;font-size:.875rem;padding:.25rem;gap:.25rem}.table-container[_ngcontent-%COMP%]{padding:.5rem;overflow-x:auto}.table-container[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.75rem;padding:.5rem}.table-container[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{font-size:.625rem}.button-text[_ngcontent-%COMP%]{font-size:.75rem}}@media (min-width: 481px) and (max-width: 768px){.container[_ngcontent-%COMP%]{padding:1.5rem}.title[_ngcontent-%COMP%]{margin-bottom:.75rem;font-size:1rem;padding:.25rem;gap:.5rem}.table-container[_ngcontent-%COMP%]{padding:.75rem;overflow-x:auto}.table-container[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.75rem;padding:.5rem}.table-container[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{font-size:.625rem}.button-text[_ngcontent-%COMP%]{font-size:.75rem}}@media (min-width: 769px) and (max-width: 1024px){.container[_ngcontent-%COMP%]{padding:1.5rem}.title[_ngcontent-%COMP%]{margin-bottom:.75rem;font-size:1rem;padding:.25rem;gap:.5rem}.table-container[_ngcontent-%COMP%]{padding:.75rem;overflow-x:auto}.table-container[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.75rem;padding:.5rem}.table-container[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{font-size:.75rem}.button-text[_ngcontent-%COMP%]{font-size:.75rem}}"]});let e=t;return e})();export{ft as CurrentOrdersComponent};
