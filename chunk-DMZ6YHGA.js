import{a as ee,b as te}from"./chunk-4RKGKIHI.js";import{a as x}from"./chunk-73G7AXVQ.js";import{a as T}from"./chunk-QXHIHSTA.js";import{A as R,Oa as Z,Ta as $,Ua as j,Va as J,Wa as H,Xa as K,Za as Q,ab as W,cb as X,db as Y,j as I,l as g,la as V,o as O,p as q,pa as G,qa as U,ra as L,t as z,v as D,w as N,x as A,y as B,z as k}from"./chunk-JKOZUD4R.js";import{$b as y,Bb as r,Cb as t,D as v,Db as f,Eb as u,Fb as c,Kb as S,Mb as _,Ub as o,Vb as P,W as M,Wa as l,a as w,da as C,ha as E,p as b,pb as d,rb as h,wb as p,za as F}from"./chunk-EBQJBUXN.js";function ie(e,n){e&1&&(u(0),o(1," Username is required. "),c())}function oe(e,n){if(e&1&&(r(0,"mat-error"),d(1,ie,2,0,"ng-container"),t()),e&2){let i,a=_();l(),p((i=a.signupForm.get("username").errors)!=null&&i.required?1:-1)}}function re(e,n){e&1&&(u(0),o(1," Role is required. "),c())}function ae(e,n){if(e&1&&(r(0,"mat-error"),d(1,re,2,0,"ng-container"),t()),e&2){let i,a=_();l(),p((i=a.signupForm.get("role").errors)!=null&&i.required?1:-1)}}function me(e,n){e&1&&(u(0),o(1," ID is required. "),c())}function le(e,n){if(e&1&&(r(0,"mat-error"),d(1,me,2,0,"ng-container"),t()),e&2){let i,a=_();l(),p((i=a.signupForm.get("id").errors)!=null&&i.required?1:-1)}}function de(e,n){e&1&&(u(0),o(1," Email is required. "),c())}function pe(e,n){e&1&&(u(0),o(1," Invalid email format. "),c())}function se(e,n){if(e&1&&(r(0,"mat-error"),d(1,de,2,0,"ng-container")(2,pe,2,0,"ng-container"),t()),e&2){let i,a=_();l(),p((i=a.signupForm.get("email").errors)!=null&&i.required?1:(i=a.signupForm.get("email").errors)!=null&&i.email?2:-1)}}function ue(e,n){e&1&&(u(0),o(1," Password is required. "),c())}function ce(e,n){e&1&&(u(0),o(1,"Password must be at least 8 characters long."),c())}function ge(e,n){e&1&&(u(0),o(1,"Password cannot exceed 32 characters."),c())}function fe(e,n){e&1&&(u(0),o(1,"Password must include A-Z, a-z, 0-9, and special character."),c())}function _e(e,n){if(e&1&&(r(0,"mat-error"),d(1,ue,2,0,"ng-container")(2,ce,2,0,"ng-container")(3,ge,2,0,"ng-container")(4,fe,2,0,"ng-container"),t()),e&2){let i,a=_();l(),p((i=a.signupForm.get("password").errors)!=null&&i.required?1:(i=a.signupForm.get("password").errors)!=null&&i.minlength?2:(i=a.signupForm.get("password").errors)!=null&&i.maxlength?3:(i=a.signupForm.get("password").errors)!=null&&i.pattern?4:-1)}}function Ce(e,n){e&1&&f(0,"app-spinner")}function he(e,n){e&1&&(r(0,"span"),o(1,"Submit"),t())}var Ve=(()=>{let n=class n{constructor(){this.authService=C(T),this.destroyRef=C(F),this.formBuilder=C(A),this.dialog=C(Z),this.loading=!1,this.hidePassword=!0}ngOnInit(){this.initializeForm()}initializeForm(){this.signupForm=this.formBuilder.group({username:["",g.required],id:["",g.required],email:["",[g.required,g.email]],password:["",[g.required,g.minLength(8),g.maxLength(32),g.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,32}$/)]],role:["",g.required]})}onSubmit(){if(this.signupForm.markAllAsTouched(),this.signupForm.valid){this.loading=!0;let a=w({},this.signupForm.value);this.authService.signup(a).pipe(M(s=>{this.loading=!1,x(this.dialog,s.message,"close"),this.signupForm.reset()}),v(s=>(this.loading=!1,x(this.dialog,s.error.message,"close"),console.log(s),b(s))),R(this.destroyRef)).subscribe()}}togglePasswordVisibility(){this.hidePassword=!this.hidePassword}};n.\u0275fac=function(s){return new(s||n)},n.\u0275cmp=E({type:n,selectors:[["app-signup"]],standalone:!0,features:[y],decls:42,vars:10,consts:[[1,"container"],[1,"form-wrapper"],[1,"form-title"],[3,"ngSubmit","formGroup"],[1,"full-width"],["matInput","","id","username","formControlName","username","placeholder","John Cena"],["id","role","formControlName","role"],["value","employee"],["value","staff"],["matInput","","id","id","formControlName","id","placeholder","BS123"],["matInput","","id","email","formControlName","email","placeholder","example@gmail.com"],["matInput","","id","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",3,"type"],["mat-icon-button","","matIconSuffix","","type","button",1,"hideIcon",3,"click"],["mat-flat-button","","type","submit",1,"submit-button",3,"disabled"]],template:function(s,m){s&1&&(r(0,"div",0)(1,"div",1)(2,"p",2)(3,"mat-icon"),o(4,"person_add"),t(),o(5," Add New User "),t(),r(6,"form",3),S("ngSubmit",function(){return m.onSubmit()}),r(7,"mat-form-field",4)(8,"mat-label"),o(9,"Username"),t(),f(10,"input",5),d(11,oe,2,1,"mat-error"),t(),r(12,"mat-form-field",4)(13,"mat-label"),o(14,"Role"),t(),r(15,"mat-select",6)(16,"mat-option",7),o(17,"Employee"),t(),r(18,"mat-option",8),o(19,"Staff"),t()(),d(20,ae,2,1,"mat-error"),t(),r(21,"mat-form-field",4)(22,"mat-label"),o(23,"ID"),t(),f(24,"input",9),d(25,le,2,1,"mat-error"),t(),r(26,"mat-form-field",4)(27,"mat-label"),o(28,"Email"),t(),f(29,"input",10),d(30,se,3,1,"mat-error"),t(),r(31,"mat-form-field",4)(32,"mat-label"),o(33,"Password"),t(),f(34,"input",11),r(35,"button",12),S("click",function(){return m.togglePasswordVisibility()}),r(36,"mat-icon"),o(37),t()(),d(38,_e,5,1,"mat-error"),t(),r(39,"button",13),d(40,Ce,1,0,"app-spinner")(41,he,2,0,"span"),t()()()()),s&2&&(l(6),h("formGroup",m.signupForm),l(5),p(m.signupForm.get("username").invalid&&m.signupForm.get("username").touched?11:-1),l(9),p(m.signupForm.get("role").invalid&&m.signupForm.get("role").touched?20:-1),l(5),p(m.signupForm.get("id").invalid&&m.signupForm.get("id").touched?25:-1),l(5),p(m.signupForm.get("email").invalid&&m.signupForm.get("email").touched?30:-1),l(4),h("type",m.hidePassword?"password":"text"),l(3),P(m.hidePassword?"visibility_off":"visibility"),l(),p(m.signupForm.get("password").invalid&&m.signupForm.get("password").touched?38:-1),l(),h("disabled",m.loading),l(),p(m.loading?40:41))},dependencies:[k,z,I,O,q,D,N,J,te,W,H,K,Q,ee,V,B,Y,X,L,G,U,j,$],styles:[".container[_ngcontent-%COMP%]{min-height:90vh;display:flex;justify-content:center;align-items:center}.form-wrapper[_ngcontent-%COMP%]{padding:2rem;width:30%;background-color:#fff;box-shadow:0 .5rem 1rem #0000001a;display:flex;flex-direction:column}.form-title[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1.25rem;gap:.5rem;font-weight:500;color:#025dad}.full-width[_ngcontent-%COMP%]{width:100%}.hideIcon[_ngcontent-%COMP%]{margin-right:1rem}.submit-button[_ngcontent-%COMP%]{text-wrap:nowrap;font-size:.875rem}@media (max-width: 480px){.form-wrapper[_ngcontent-%COMP%]{padding:1.5rem;width:60%}.form-title[_ngcontent-%COMP%]{font-size:.875rem;gap:.25rem;margin-bottom:.75rem}.submit-button[_ngcontent-%COMP%]{font-size:.75rem}}@media (min-width: 481px) and (max-width: 768px){.form-wrapper[_ngcontent-%COMP%]{padding:1.5rem;width:40%}.form-title[_ngcontent-%COMP%]{font-size:.875rem;gap:.5rem;margin-bottom:.75rem}.submit-button[_ngcontent-%COMP%]{font-size:.75rem}}@media (min-width: 769px) and (max-width: 1024px){.form-wrapper[_ngcontent-%COMP%]{padding:1.75rem;width:40%}.form-title[_ngcontent-%COMP%]{font-size:1rem;gap:.5rem;margin-bottom:.75rem}.submit-button[_ngcontent-%COMP%]{font-size:.875rem}}"]});let e=n;return e})();export{Ve as SignupComponent};
