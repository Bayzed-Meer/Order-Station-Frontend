import{a as X}from"./chunk-IK2R2GLI.js";import{a as B}from"./chunk-AQHRL66G.js";import{a as re,b as oe}from"./chunk-UJMHTISB.js";import{a as v}from"./chunk-WQ6OIEHT.js";import{Ea as Q,Fa as W,Ga as Y,Ha as ee,Ka as te,La as ne,da as H,fa as J,g as k,h as f,j as A,k as V,m as G,o as $,p as L,q as j,r as Z,s as U,t as h,za as K}from"./chunk-MGXZWG47.js";import{Ab as l,Bb as a,Cb as w,Cc as D,D as b,Db as d,Eb as p,Gb as I,Jb as R,Lb as P,Sb as O,Tb as s,W as C,Wa as i,Xb as T,a as x,ac as z,da as _,ha as y,p as M,pb as g,ra as F,rb as r,sa as S,vc as N,xc as q,za as E}from"./chunk-BTNHTO55.js";function ie(e,t){e&1&&(d(0),s(1," Email is required. "),p())}function ae(e,t){e&1&&(d(0),s(1," Please enter a valid email address. "),p())}function se(e,t){if(e&1&&(l(0,"mat-error"),g(1,ie,2,0,"ng-container",6)(2,ae,2,0,"ng-container",6),a()),e&2){let c,m,n=P();i(),r("ngIf",(c=n.resetPasswordForm.get("email").errors)==null?null:c.required),i(),r("ngIf",(m=n.resetPasswordForm.get("email").errors)==null?null:m.email)}}function me(e,t){e&1&&(d(0),s(1," Current Password is required "),p())}function le(e,t){if(e&1&&(l(0,"mat-error"),g(1,me,2,0,"ng-container",6),a()),e&2){let c,m=P();i(),r("ngIf",(c=m.resetPasswordForm.get("currentPassword").errors)==null?null:c.required)}}function de(e,t){e&1&&(d(0),s(1," New Password is required. "),p())}function pe(e,t){e&1&&(d(0),s(1," Password must be at least 8 characters long "),p())}function ce(e,t){e&1&&(d(0),s(1," Password cannot be more than 32 characters long. "),p())}function ue(e,t){e&1&&(d(0),s(1," Password must include at least one uppercase letter, one lowercase letter, one number, and one special character (@$!%*?&). "),p())}function ge(e,t){if(e&1&&(l(0,"mat-error"),g(1,de,2,0,"ng-container",6)(2,pe,2,0,"ng-container",6)(3,ce,2,0,"ng-container",6)(4,ue,2,0,"ng-container",6),a()),e&2){let c,m,n,o,u=P();i(),r("ngIf",(c=u.resetPasswordForm.get("newPassword").errors)==null?null:c.required),i(),r("ngIf",(m=u.resetPasswordForm.get("newPassword").errors)==null?null:m.minlength),i(),r("ngIf",(n=u.resetPasswordForm.get("newPassword").errors)==null?null:n.maxlength),i(),r("ngIf",(o=u.resetPasswordForm.get("newPassword").errors)==null?null:o.pattern)}}function fe(e,t){e&1&&(d(0),w(1,"app-spinner"),p())}function _e(e,t){e&1&&(l(0,"span"),s(1,"Reset"),a())}var Ae=(()=>{let t=class t{constructor(){this.authService=_(B),this.destroyRef=_(E),this.formBuilder=_(j),this.dialog=_(K),this.loading=!1,this.role=""}ngOnInit(){this.initializeForm(),this.checkRole()}checkRole(){this.authService.getRole().pipe(C(m=>this.role=m),h(this.destroyRef)).subscribe()}initializeForm(){this.resetPasswordForm=this.formBuilder.group({email:["",[f.required,f.email]],currentPassword:["",f.required],newPassword:["",[f.required,f.minLength(8),f.maxLength(32),f.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,32}$/)]]})}onSubmit(){if(this.resetPasswordForm.markAllAsTouched(),this.resetPasswordForm.valid){this.loading=!0;let m=x({},this.resetPasswordForm.value);this.authService.resetPassword(m).pipe(C(n=>{this.loading=!1,v(this.dialog,n.message,"close"),this.resetPasswordForm.reset()}),b(n=>(this.loading=!1,v(this.dialog,n.error.message,"close"),console.log(n),M(n))),h(this.destroyRef)).subscribe()}}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=y({type:t,selectors:[["app-reset-password"]],standalone:!0,features:[T],decls:26,vars:9,consts:[["saveButtonContent",""],[3,"ngClass"],[1,"reset-password-title"],[3,"ngSubmit","formGroup"],[1,"full-width"],["matInput","","id","email","type","email","formControlName","email","placeholder","example@gmail.com"],[4,"ngIf"],["matInput","","id","currentPassword","type","password","formControlName","currentPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"],["matInput","","id","password","type","password","formControlName","newPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"],["mat-flat-button","","type","submit",1,"submit-button",3,"disabled"],[4,"ngIf","ngIfElse"]],template:function(n,o){if(n&1){let u=I();l(0,"div",1)(1,"div",1)(2,"p",2)(3,"mat-icon"),s(4,"security"),a(),s(5," Reset Password"),a(),l(6,"form",3),R("ngSubmit",function(){return F(u),S(o.onSubmit())}),l(7,"mat-form-field",4)(8,"mat-label"),s(9,"Email"),a(),w(10,"input",5),g(11,se,3,2,"mat-error",6),a(),l(12,"mat-form-field",4)(13,"mat-label"),s(14,"Current Password"),a(),w(15,"input",7),g(16,le,2,1,"mat-error",6),a(),l(17,"mat-form-field",4)(18,"mat-label"),s(19,"New Password"),a(),w(20,"input",8),g(21,ge,5,4,"mat-error",6),a(),l(22,"button",9),g(23,fe,2,0,"ng-container",10)(24,_e,2,0,"ng-template",null,0,z),a()()()()}if(n&2){let u=O(25);r("ngClass",o.role==="admin"?"admin-container-div":"container-div"),i(),r("ngClass",o.role==="admin"?"content-div":""),i(5),r("formGroup",o.resetPasswordForm),i(5),r("ngIf",o.resetPasswordForm.get("email").invalid&&o.resetPasswordForm.get("email").touched),i(5),r("ngIf",o.resetPasswordForm.get("currentPassword").invalid&&o.resetPasswordForm.get("currentPassword").touched),i(5),r("ngIf",o.resetPasswordForm.get("newPassword").invalid&&o.resetPasswordForm.get("newPassword").touched),i(),r("disabled",o.loading),i(),r("ngIf",o.loading)("ngIfElse",u)}},dependencies:[D,N,q,Z,G,k,A,V,U,$,L,X,ne,te,Y,ee,J,H,oe,re,W,Q],styles:[".container-div[_ngcontent-%COMP%]{padding:2rem;background-color:#fff;box-shadow:0 .5rem 1rem #0000001a}.admin-container-div[_ngcontent-%COMP%]{min-height:90vh;display:flex;justify-content:center;align-items:center}.content-div[_ngcontent-%COMP%]{padding:2rem;width:30%;box-shadow:0 .5rem 1rem #0000001a;background-color:#fff}.reset-password-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:500;display:flex;align-items:center;gap:.5rem;color:#025dad}.full-width[_ngcontent-%COMP%]{width:100%}.submit-button[_ngcontent-%COMP%]{text-wrap:nowrap;font-size:.875rem}@media (max-width: 480px){.container-div[_ngcontent-%COMP%]{padding:1.5rem}.content-div[_ngcontent-%COMP%]{padding:1.5rem;width:50%}.reset-password-title[_ngcontent-%COMP%]{font-size:.875rem;gap:.5rem;margin-bottom:.75rem}.submit-button[_ngcontent-%COMP%]{font-size:.75rem}}@media (min-width: 481px) and (max-width: 768px){.container-div[_ngcontent-%COMP%]{padding:1.5rem}.content-div[_ngcontent-%COMP%]{padding:1.5rem;width:40%}.reset-password-title[_ngcontent-%COMP%]{font-size:1rem;gap:.5rem;margin-bottom:.75rem}.submit-button[_ngcontent-%COMP%]{font-size:.75rem}}@media (min-width: 769px) and (max-width: 1024px){.container-div[_ngcontent-%COMP%]{padding:1.5rem}.content-div[_ngcontent-%COMP%]{padding:1.5rem;width:40%}.reset-password-title[_ngcontent-%COMP%]{font-size:1rem;gap:.5rem;margin-bottom:1rem}.submit-button[_ngcontent-%COMP%]{font-size:.875rem}}"]});let e=t;return e})();export{Ae as a};
